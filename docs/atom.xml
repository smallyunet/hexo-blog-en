<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>smallyu‘s Blog</title>
  <icon>https://en.smallyu.net/favicon.png</icon>
  <subtitle>smallyu&#39;s Blog</subtitle>
  <link href="https://en.smallyu.net/atom.xml" rel="self"/>
  <link href="https://pubsubhubbub.appspot.com/" rel="hub"/>
  <link href="https://en.smallyu.net/"/>
  <updated>2024-06-03T16:03:04.852Z</updated>
  <id>https://en.smallyu.net/</id>
  
  <author>
    <name>smallyu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>PBFT in Blockchain Doesn&#39;t Require a Second Vote</title>
    <link href="https://en.smallyu.net/2024/06/03/PBFT%20in%20Blockchain%20Doesn&#39;t%20Require%20a%20Second%20Vote/"/>
    <id>https://en.smallyu.net/2024/06/03/PBFT%20in%20Blockchain%20Doesn&#39;t%20Require%20a%20Second%20Vote/</id>
    <published>2024-06-03T03:09:21.000Z</published>
    <updated>2024-06-03T16:03:04.852Z</updated>
    
    <content type="html"><![CDATA[<p>Why does PBFT require two rounds of voting, and what is the role of the second vote? This question has puzzled me for a long time.</p><h3 id="Reverse-Deduction"><a href="#Reverse-Deduction" class="headerlink" title="Reverse Deduction"></a>Reverse Deduction</h3><p>From this perspective, in what situations does the second vote play a role? It only plays a role when the results of the second vote differ from the first. If the second vote’s results are strictly consistent with the first, then there is no need for a second vote.</p><p>So, in what situations would the second vote’s results differ from the first? Only when malicious nodes exist and deliberately cast different votes in the second voting phase will the results differ.</p><p>This is the conventional operational flowchart of traditional PBFT, where node 3 is a faulty or malicious node and does not respond from beginning to end:</p><img src="1.png" width="70%"><p>This is the flowchart with the prepare phase removed, retaining only one voting process, where node 3 is still a faulty node and does not respond:</p><img src="2.png" width="60%"><p>The key is that in this scenario, nodes 0, 1, and 2 are honest nodes and will never cast malicious votes or abstain, so the result of the commit phase will be consistent with the prepare phase. Thus, even if the prepare phase is removed, the system will eventually reach a consensus.</p><p>Node 3 has always been a malicious node. If, during the commit phase, any of the nodes 0, 1, or 2 cast votes that differ from the prepare phase, it means that there are more than one malicious node in the system, exceeding the fault tolerance capability.</p><h3 id="Forward-Understanding"><a href="#Forward-Understanding" class="headerlink" title="Forward Understanding"></a>Forward Understanding</h3><p>To prove that the second vote is necessary is equivalent to stating that without the second vote, the system will not function correctly.</p><p>Logically, even if the second vote has various benefits, such as increasing the system’s fault tolerance through redundancy, quickly identifying errors, and promptly adjusting to a consistent state, it does not prove that the second vote is indispensable. For example, in the high-voted answer in <a href="https://cs.stackexchange.com/questions/54152/why-is-the-commit-phase-in-pbft-necessary">Why is the commit phase in PBFT necessary?</a>, many points are mentioned, but it mainly explains the design and function of the commit phase from a positive perspective.</p><p>A more plausible explanation I’ve found is here: <a href="https://stackoverflow.com/questions/51125238/pbft-why-cant-the-replicas-perform-the-request-after-2-3-have-prepared-why-do">PBFT: Why can’t the replicas perform the request after 2&#x2F;3 have prepared? Why do we need the commit phase?</a> </p><p>It mentions that without the commit phase, nodes cannot ensure the order of request execution during a view change.</p><p>I think the description on StackOverflow differs from the meaning of the high-voted answer. The high-voted answer implies that nodes’ execute phases become inconsistent without the commit phase, with some being faster and others slower. However, even with two rounds of voting, nodes might fail after the commit phase but before execution, causing execution differences. Therefore, this type of failure is not the critical scenario.</p><p>A more reasonable scenario is mentioned in the paper <a href="https://pmg.csail.mit.edu/papers/bft-tocs.pdf">Practical Byzantine Fault Tolerance and Proactive Recovery</a>. During a view change, different requests might use the same sequence number and be packaged into different views.</p><blockquote><p>Replicas may collect prepared certificates in different views with the same sequence number and different requests. The commit phase solves this problem as follows.</p></blockquote><h3 id="Single-Vote-Process"><a href="#Single-Vote-Process" class="headerlink" title="Single Vote Process"></a>Single Vote Process</h3><p>This scenario is based on a single vote process, meaning there is no prepare phase.</p><h4 id="Scenario-Setup"><a href="#Scenario-Setup" class="headerlink" title="Scenario Setup"></a>Scenario Setup</h4><p><strong>View V1</strong></p><ol><li>R1 proposes proposal P and broadcasts it to R2, R3, and R4.</li><li>Proposal P is executed by R2, R3, and R4, but not by R1.</li></ol><pre><code>R1: –R2: P –&gt; Execute PR3: P –&gt; Execute PR4: P –&gt; Execute P</code></pre><p><strong>View Switch to V2</strong></p><ol><li>Assume R1 fails, and the view switches to V2.</li><li>R2 proposes a new proposal P’.</li><li>R2 proposes a new proposal P’ and broadcasts it to R1, R3, and R4.</li><li>The new proposal P’ is executed by all replicas.</li></ol><pre><code>R1: --      P&#39; --&gt; Execute P&#39;R2: P --&gt; Execute P      P&#39; --&gt; Execute P&#39;R3: P --&gt; Execute P      P&#39; --&gt; Execute P&#39;R4: P --&gt; Execute P      P&#39; --&gt; Execute P&#39;</code></pre><h4 id="Specific-Example"><a href="#Specific-Example" class="headerlink" title="Specific Example"></a>Specific Example</h4><p>Assume proposals P and P’ are operations on the same account balance:</p><ul><li>Proposal P: Increase account A’s balance by 10 units.</li><li>Proposal P’: Decrease account A’s balance by 5 units.</li></ul><p>The order of operations and results in views V1 and V2 are as follows:</p><p><strong>View V1</strong></p><pre><code>R1: Account A balance = 100 (P not executed)R2: Account A balance = 110 (P executed)R3: Account A balance = 110 (P executed)R4: Account A balance = 110 (P executed)</code></pre><p><strong>View V2</strong></p><pre><code>R1: Account A balance = 100 (P not executed) –&gt; Execute P’ –&gt; Account A balance = 95R2: Account A balance = 110 (P executed) –&gt; Execute P’ –&gt; Account A balance = 105R3: Account A balance = 110 (P executed) –&gt; Execute P’ –&gt; Account A balance = 105R4: Account A balance = 110 (P executed) –&gt; Execute P’ –&gt; Account A balance = 105</code></pre><h4 id="Scenario-Analysis"><a href="#Scenario-Analysis" class="headerlink" title="Scenario Analysis"></a>Scenario Analysis</h4><p>Let’s repeat this sentence: Different requests (R2) use the same sequence number (R1 thinks it is P) and are packaged into different views (P’). The same sequence number should refer to the execution order, indicating which request is to be executed at the current time.</p><p>In the above scenario, the final state is indeed inconsistent due to node A’s failure.</p><h3 id="Two-Votes"><a href="#Two-Votes" class="headerlink" title="Two Votes"></a>Two Votes</h3><p>How does the two-vote process solve the problem in the above scenario?</p><ol><li>If node A fails after receiving the prepare result and before starting the commit, all nodes will not enter the execute phase.</li><li>If node A fails after receiving the commit result and before starting the execute, node A will retry executing P based on the commit result, then execute P’.</li></ol><h4 id="Scenario-Analysis-1"><a href="#Scenario-Analysis-1" class="headerlink" title="Scenario Analysis"></a>Scenario Analysis</h4><p>Did you notice a bit of unfairness in point 2?</p><p>In the two-vote scenario, node A can retry executing P based on the commit result.</p><p>In the single-vote scenario, node A does not retry executing P based on the commit result but directly executes P’.</p><p>Therefore, the two-vote process does not completely avoid state inconsistencies caused by node failures before execution. It merely adds an extra communication step to repeatedly confirm that other nodes’ states are consistent with its expectations, reducing the risk of state inconsistency.</p><p>The two-vote process advances the time for detecting faults. If node A does not cast a vote in the commit phase, other nodes will know that node A has failed, rather than waiting until they have executed and then discovering that node A has not executed. More confirmation means more security, reducing the cost of system rollback after execution and trying to agree as much as possible before execution. This is probably the greatest role of the two-vote process.</p><p>Overall, the second vote never seems to demonstrate an indispensable significance but merely brings some benefits and enhances system security. This issue might be similar to why TCP requires three-way handshakes to establish a connection. Wouldn’t two be enough? Perhaps even one is sufficient, but it could cause some problems. Three confirmations are sufficiently secure.</p><h3 id="Stateless-vs-Stateful"><a href="#Stateless-vs-Stateful" class="headerlink" title="Stateless vs. Stateful"></a>Stateless vs. Stateful</h3><p>Why does PBFT require repeated confirmations to avoid state inconsistencies after execution? Maybe because any system rollback is a very cautious task, so the cost of communication before execution is increased.</p><h4 id="Stateless"><a href="#Stateless" class="headerlink" title="Stateless"></a>Stateless</h4><p>Returning to the single-vote scenario above, under what circumstances would the faulty node A not execute P’?</p><ol><li>Node A knows it failed to execute P.</li><li>Node A must execute P before executing P’.</li></ol><p>If these two conditions are met, even with a single vote, the same effect as the two-vote process can be achieved.</p><p>For stateless systems, if a node only records a final number, it would be quite difficult. The node knows it has not executed P and then receives a P’, but cannot distinguish whether P’ should be executed after P or is on an equal level with P.</p><p>The normal sequence is:</p><pre><code>O -&gt; P -&gt; P&#39;</code></pre><p>For node A, knowing it has not executed P but receives a P’:</p><pre><code>O -&gt; (P&#39;)?</code></pre><p>Should it execute? Node A does, and the state becomes chaotic.</p><p>For this reason, the execution in stateless systems is very cautious.</p><h4 id="Stateful"><a href="#Stateful" class="headerlink" title="Stateful"></a>Stateful</h4><p>Blockchain is a stateful system that naturally records its execution records (blocks) and enforces the ordering of requests (block hash, parent hash).</p><p>When a node receives a block, it can determine the position of the block, whether it should be executed in the current round, and whether it is missing blocks, promptly synchronizing the blocks from other nodes.</p><p>Therefore, in the context of blockchain, if the goal is merely to achieve the final state consistency of most nodes, a second vote is not necessary.</p><h3 id="Doubts"><a href="#Doubts" class="headerlink" title="Doubts"></a>Doubts</h3><p>Why does PBFT require two votes? This question lies at the knowledge boundary of GPT-4. If you ask it in detail, it will start making up answers, which is typical of GPT-4 when it does not know the answer.</p><p>With my limited internet search capabilities, I have never found a convincing reason that proves the second vote in PBFT is necessary.</p><p>After repeated deductions, the conclusion I have reached is that a second vote is not necessary, and a single vote can also achieve the same majority node consistency.</p><p>But why, for so long, have PBFT and various variants such as Tendermint and HotStuff retained the two-vote process? Why has no one ever questioned the necessity of the second vote?</p><p>Where exactly am I wrong? Perhaps my understanding of PBFT is not deep enough, and I have not touched upon the scenarios where the second vote truly plays a role. But if such scenarios exist, why can’t I find material that directly describes these scenarios?</p>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;Why does PBFT require two rounds of voting, and what is the role of the second vote? This question has puzzled me for a long</summary>
        
      
    
    
    
    
    <category term="BFT" scheme="https://en.smallyu.net/tags/BFT/"/>
    
  </entry>
  
  <entry>
    <title>Small Tips for Cryptocurrency Investment</title>
    <link href="https://en.smallyu.net/2024/05/04/Small%20Tips%20for%20Cryptocurrency%20Investment/"/>
    <id>https://en.smallyu.net/2024/05/04/Small%20Tips%20for%20Cryptocurrency%20Investment/</id>
    <published>2024-05-04T12:44:13.000Z</published>
    <updated>2024-06-03T16:06:56.841Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-BTC-is-the-Industry-Baseline"><a href="#1-BTC-is-the-Industry-Baseline" class="headerlink" title="1. BTC is the Industry Baseline"></a>1. BTC is the Industry Baseline</h3><p>The existence of Bitcoin underpins the entire cryptocurrency industry. If Bitcoin were ever to be discredited, deemed unsafe, not decentralized, or valueless, the whole industry would collapse. Bitcoin has never been surpassed. In fact, except for Bitcoin, all other cryptocurrencies are altcoins, especially in the eyes of veteran miners who have experienced the era of Bitcoin alone. Altcoins started as Bitcoin imitators, trying to make certain changes, including Ethereum. Vitalik also dabbled with colored coins, started chains from PoW, and raised funds in China. Everything started from Bitcoin.</p><h3 id="2-PoW-is-Resilient"><a href="#2-PoW-is-Resilient" class="headerlink" title="2. PoW is Resilient"></a>2. PoW is Resilient</h3><p>Around April 12, 2024, due to multiple factors, generally believed to be due to skirmishes between two countries potentially leading to war, all cryptocurrencies fell by an average of about 20%. Binance’s Gainer leaderboard was entirely red, which can be simply referred to as the 412 incident.</p><p>Observing the price changes during this period, it is evident that PoW-based coins generally fell less than PoS-based coins. Led by BTC, Doge, LTC, BCH, ZEC, ETC, and ETHW all showed smaller declines. After all, PoW chains involve miners investing real computational power and hardware costs, making them reluctant to sell at low prices. PoS, on the other hand, involves staking a lot of money into servers, generating money from money, which comes relatively easily. ETH, DOT, ADA, COSMOS, and many others—about 50 of the top 100 on CMC—are PoS-based with staking functions.</p><h3 id="3-BTC-Standard"><a href="#3-BTC-Standard" class="headerlink" title="3. BTC Standard"></a>3. BTC Standard</h3><p>The basic logic of crypto trading is based on the BTC standard, meaning trading altcoins against Bitcoin’s rate. Suppose you initially have 1 BTC and believe Doge’s upcoming rise will outperform BTC. You convert BTC to Doge, wait for Doge to rise by 20%, and then convert all Doge back to BTC. Your BTC has now increased from 1 to 1.2. This is the essence of the BTC standard.</p><p>From then on, you will ignore market fluctuations, undeterred by bull or bear markets, focusing only on the amount of Bitcoin you have—be it 1, 1.2, or 0.8. Regardless of how BTC’s price changes against fiat, it will double every four years, dropping before rising again, achieving all-time highs repeatedly.</p><p>Trading based on fiat standards usually ends in losses, with many suffering significant losses. This specifically refers to spot trading; avoid contracts entirely.</p><h3 id="4-Choose-from-CMC-Top-100"><a href="#4-Choose-from-CMC-Top-100" class="headerlink" title="4. Choose from CMC Top 100"></a>4. Choose from CMC Top 100</h3><p>Focus as much as possible on coins ranked in the top 100 on Coin Market Cap (CMC) and select from these. The reasons are twofold: the probability of a severe crash is lower, and support from the ecosystem is better. Lower-ranked coins can pose issues like wallet incompatibility, making transactions difficult. Or, a contract address change (as happened recently with an AI sector coin) can leave you stuck, as the old contract still runs at 20% of the price, while the new one operates at 80%.</p><h3 id="5-Founder’s-Departure-Marks-Decentralization"><a href="#5-Founder’s-Departure-Marks-Decentralization" class="headerlink" title="5. Founder’s Departure Marks Decentralization"></a>5. Founder’s Departure Marks Decentralization</h3><p>BTC is unique because its founder remained anonymous from the start, which was a very smart move. This anonymity allowed BTC to be widely speculated upon. Why are there so many asset types on BTC, like colored coins, RGB++, Taproot Assets, inscriptions, runes, and L2 assets still competing? Because no one can come forward to define a roadmap for Bitcoin, and no one knows how it should develop next.</p><p>In contrast, ETH’s founder actively participates in global conferences and gives talks, outlining Ethereum’s roadmap and guiding L2’s technological direction. When ETH was attacked by hackers, the founder led the community to fork away the attack history and transitioned the consensus mechanism from PoW to PoS. Such influence shows that ETH is centralized. ETH cannot pass the Howey test and is likely to be classified as a security under SEC standards.</p><p>If you created a coin and promoted it, it would seem inappropriate. However, if a coin is decentralized, you can promote it freely. You just like Doge, you can promote it as you wish.</p><p>BSV’s CW also lost a lawsuit this year. Some in the community see this as positive, believing CW’s departure signifies BSV becoming truly community-driven. Regardless of BSV’s future, the departure of the founder is a significant indicator.</p><p>Another example is ETC and ETHW. Both were forked by Baory, a controversial figure, but their market value, price, and TVL are notable. During the 412 incident, these two coins showed resilience. Although buying them is risky due to lack of technical updates and low GitHub activity, their prices remain intriguing. ETC and ETHW are truly without founders and are PoW coins.</p><p>Additionally, since Ethereum transitioned from PoW to PoS, the ETH&#x2F;BTC exchange rate has been declining, from nearly 0.1 to around 0.05 now.</p><h3 id="6-Others"><a href="#6-Others" class="headerlink" title="6. Others"></a>6. Others</h3><p>Let’s take a simple comparison of the CMC top 10:</p><ol><li>BTC: Industry baseline, market cap dominance of 50%</li><li>ETH: Creator of EVM and DeFi market, with a vast ecosystem, market cap dominance of 16%</li><li>USDT: The most widely used stablecoin, backed by US Treasury reserves</li><li>BNB: The largest exchange platform token</li><li>SOL: PoH+DPoS consensus mechanism, centralized, relies on a few sequencers to order transactions before handing them to validators for packaging</li><li>USDC: The safest stablecoin, backed by gold reserves</li><li>XRP: RPCA consensus mechanism</li><li>DOGE: PoW consensus, the largest meme coin, favored by Musk</li><li>TON: Chain issued by Telegram</li><li>ADA: Founded by a famous figure, developed using Haskell, UTXO + PoS</li></ol>]]></content>
    
    
      
      
        
        
    <summary type="html">&lt;h3 id=&quot;1-BTC-is-the-Industry-Baseline&quot;&gt;&lt;a href=&quot;#1-BTC-is-the-Industry-Baseline&quot; class=&quot;headerlink&quot; title=&quot;1. BTC is the Industry</summary>
        
      
    
    
    
    
    <category term="Crypto Trading" scheme="https://en.smallyu.net/tags/Crypto-Trading/"/>
    
  </entry>
  
</feed>
