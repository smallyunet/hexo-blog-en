<!DOCTYPE html><html lang="en"><head><title>Solana Smart Contract Development Tutorial (1)</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="smallyu‚Äòs Blog" type="application/atom+xml">
</head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
  var navbar = document.querySelector('nav.navbar');
  if (navbar) {
    navbar.classList.remove('navbar-fixed-top');
  }
}
</script><div><div class="inner"><h1>Solana Smart Contract Development Tutorial (1)</h1><div class="time">2025-06-24</div><div class="title-margin"></div><blockquote>
<p>This is a beginner-friendly tutorial series that teaches Solana smart contract development from the very basics.</p>
<ul>
<li><a href="/2025/06/24/Solana%20Smart%20Contract%20Development%20Tutorial%20(1)/">Part 1</a>: Basic environment setup, deploying HelloWorld contract, on-chain contract interaction</li>
<li><a href="/2025/06/26/Solana%20Smart%20Contract%20Development%20Tutorial%20(2)/">Part 2</a>: Creating a minimal USDT contract model, custom data structures and methods</li>
<li><a href="/2025/06/28/Solana%20Smart%20Contract%20Development%20Tutorial%20(3)/">Part 3</a>: Using the official SPL library to reuse contract functionality and issue a standard token</li>
</ul>
</blockquote>
<p>We‚Äôll start from the basics to learn Solana smart contract development. You only need general programming knowledge, like understanding object-oriented concepts‚Äîno prior experience with other networks‚Äô smart contracts or the Rust language is required.</p>
<h3 id="1-Install-the-Environment"><a href="#1-Install-the-Environment" class="headerlink" title="1. Install the Environment"></a>1. Install the Environment</h3><p>Visit Solana‚Äôs official installation guide: <a href="https://solana.com/docs/intro/installation">https://solana.com/docs/intro/installation</a></p>
<p>The documentation provides a one-line install command for all dependencies, as well as a step-by-step guide. Pay attention: Solana CLI requires editing your environment variables. Once installed, the <code>solana</code> command should be available:</p>
<pre><code class="bash">solana --help
</code></pre>
<h3 id="2-Initialize-the-Project"><a href="#2-Initialize-the-Project" class="headerlink" title="2. Initialize the Project"></a>2. Initialize the Project</h3><p>Use the <code>anchor</code> command to initialize a smart contract project. This CLI tool was installed in the previous step. Don‚Äôt worry about the generated directory structure for now:</p>
<pre><code class="bash">anchor init hello_sol
cd hello_sol
</code></pre>
<h3 id="3-Write-the-Contract-Code"><a href="#3-Write-the-Contract-Code" class="headerlink" title="3. Write the Contract Code"></a>3. Write the Contract Code</h3><p>In the <code>programs/hello_sol/src</code> directory, there is a <code>lib.rs</code> file. Files ending in <code>.rs</code> are Rust source code. Copy the following code into that file. Note: the <code>declare_id</code> value is generated automatically when initializing your project‚Äîyou don‚Äôt need to copy the one shown here exactly:</p>
<pre><code class="rust">use anchor_lang::prelude::*;

declare_id!(&quot;3Zbdw1oWu1CiMiQr3moQeT4XzMgeqmCvjH5R5wroDWQH&quot;);

#[program]
pub mod hello_sol &#123;
    use super::*;

    pub fn say_hello(ctx: Context&lt;Hello&gt;) -&gt; Result&lt;()&gt; &#123;
        msg!(&quot;Hello, world!&quot;);
        Ok(())
    &#125;
&#125;

#[derive(Accounts)]
pub struct Hello &#123;&#125;
</code></pre>
<h3 id="4-Compile-the-Smart-Contract"><a href="#4-Compile-the-Smart-Contract" class="headerlink" title="4. Compile the Smart Contract"></a>4. Compile the Smart Contract</h3><p>Use the <code>anchor</code> command to compile the smart contract code you just added. Make sure it compiles successfully without syntax errors. Rust is a very strict language and may throw lots of warnings‚Äîdon‚Äôt worry about them unless there are errors:</p>
<pre><code class="bash">anchor build
</code></pre>
<h3 id="5-Set-the-Default-Network-to-Devnet"><a href="#5-Set-the-Default-Network-to-Devnet" class="headerlink" title="5. Set the Default Network to Devnet"></a>5. Set the Default Network to Devnet</h3><p>Run this command to set Solana CLI‚Äôs default network to devnet. Devnet is for developers and allows testing without using real SOL tokens:</p>
<pre><code class="bash">solana config set --url https://api.devnet.solana.com
</code></pre>
<h3 id="6-Create-a-Local-Account-File"><a href="#6-Create-a-Local-Account-File" class="headerlink" title="6. Create a Local Account File"></a>6. Create a Local Account File</h3><p>This command creates a Solana account file at the default local path. Deploying smart contracts requires fees, which this account will cover:</p>
<pre><code class="bash">solana-keygen new -o ~/.config/solana/id.json  
</code></pre>
<p>After running this command, look for the output line starting with <code>pubkey:</code>‚Äîthis is your local account address. Since we already set the default network to devnet, you can check your balance with:</p>
<pre><code class="bash">solana balance
</code></pre>
<p>Or visit the devnet <a href="https://explorer.solana.com/?cluster=devnet">Explorer</a> and search for your address. The resulting URL will look like:
<a href="https://explorer.solana.com/address/75sFifxBt7zw1YrDfCdPjDCGDyKEqLWrBarPCLg6PHwb?cluster=devnet">https://explorer.solana.com/address/75sFifxBt7zw1YrDfCdPjDCGDyKEqLWrBarPCLg6PHwb?cluster=devnet</a></p>
<p>Of course, your account balance will initially show <code>0 SOL</code>.</p>
<h3 id="7-Request-an-Airdrop-on-Devnet"><a href="#7-Request-an-Airdrop-on-Devnet" class="headerlink" title="7. Request an Airdrop on Devnet"></a>7. Request an Airdrop on Devnet</h3><p>Run this command to receive 2 SOL in your devnet account. The number <code>2</code> specifies how much to request. The maximum per airdrop is 2 SOL, which is sufficient for our use:</p>
<pre><code class="bash">solana airdrop 2
</code></pre>
<h3 id="8-Deploy-the-Contract-to-Devnet"><a href="#8-Deploy-the-Contract-to-Devnet" class="headerlink" title="8. Deploy the Contract to Devnet"></a>8. Deploy the Contract to Devnet</h3><p>Now that you have the contract code, a local account, and a funded wallet, you can deploy the contract to devnet:</p>
<pre><code class="bash">anchor deploy --provider.cluster devnet 
</code></pre>
<p>If deployment succeeds, you‚Äôll see <code>Deploy success</code>. Pay attention to the output line starting with <code>Program Id:</code>‚Äîthat is your contract‚Äôs address. You can search it in the devnet Explorer, for example:
<a href="https://explorer.solana.com/address/3Zbdw1oWu1CiMiQr3moQeT4XzMgeqmCvjH5R5wroDWQH?cluster=devnet">https://explorer.solana.com/address/3Zbdw1oWu1CiMiQr3moQeT4XzMgeqmCvjH5R5wroDWQH?cluster=devnet</a></p>
<h3 id="9-Interact-with-the-On-Chain-Contract"><a href="#9-Interact-with-the-On-Chain-Contract" class="headerlink" title="9. Interact with the On-Chain Contract"></a>9. Interact with the On-Chain Contract</h3><p>Go to the <code>hello_sol/app</code> directory and create a new file named <code>app.js</code>. Paste the following code. It reads your local account file and uses it to send a transaction that calls the deployed smart contract. Every time you run this script, it will create a transaction on-chain:</p>
<pre><code class="javascript">const anchor = require(&#39;@coral-xyz/anchor&#39;);
const fs     = require(&#39;fs&#39;);
const os     = require(&#39;os&#39;);
const path   = require(&#39;path&#39;);
const &#123; Keypair, Connection &#125; = anchor.web3;

const RPC_URL    = process.env.RPC_URL;
const connection = new Connection(RPC_URL, &#123; commitment: &#39;confirmed&#39; &#125;);

const secretKey = Uint8Array.from(
  JSON.parse(
    fs.readFileSync(
      path.join(os.homedir(), &#39;.config/solana/id.json&#39;),
      &#39;utf8&#39;,
    ),
  ),
);

const wallet   = new anchor.Wallet(Keypair.fromSecretKey(secretKey));
const provider = new anchor.AnchorProvider(connection, wallet, &#123;
  preflightCommitment: &#39;confirmed&#39;,
&#125;);
anchor.setProvider(provider);

const idlPath = path.resolve(__dirname, &#39;../target/idl/hello_sol.json&#39;);
const idl     = JSON.parse(fs.readFileSync(idlPath, &#39;utf8&#39;));
const program = new anchor.Program(idl, provider);

(async () =&gt; &#123;
  try &#123;
    const sig = await program.methods.sayHello().rpc();
    console.log(&#39;‚úÖ tx&#39;, sig);
    console.log(`üåê https://explorer.solana.com/tx/$&#123;sig&#125;?cluster=devnet`);
  &#125; catch (err) &#123;
    console.error(&#39;‚ùå&#39;, err);
  &#125;
&#125;)();
</code></pre>
<p>Back in the root <code>hello_sol</code> directory, install the Node.js dependencies:</p>
<pre><code class="bash">npm init -y 
npm install @coral-xyz/anchor
</code></pre>
<p>Then, still in the root directory, run this command to execute the script and invoke your deployed contract:</p>
<pre><code class="bash">export RPC_URL=https://api.devnet.solana.com
node app/app.js
</code></pre>
<p>The <code>RPC_URL</code> environment variable is the API endpoint. Since Node.js scripts don‚Äôt use the system proxy by default, if you encounter connectivity issues, consider using a better RPC provider like <a href="https://www.helius.dev/">Helius</a>. If the script throws this error, it‚Äôs likely a network issue‚Äîtry a different RPC endpoint:</p>
<pre><code class="javascript">‚ùå Error: failed to get recent blockhash: TypeError: fetch failed
    at Connection.getLatestBlockhash (/Users/smallyu/work/github/hello_sol/node_modules/@solana/web3.js/lib/index.cjs.js:7236:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async AnchorProvider.sendAndConfirm (/Users/smallyu/work/github/hello_sol/node_modules/@coral-xyz/anchor/dist/cjs/provider.js:89:35)
    at async MethodsBuilder.rpc [as _rpcFn] (/Users/smallyu/work/github/hello_sol/node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/rpc.js:15:24)
    at async /Users/smallyu/work/github/hello_sol/app/app.js:40:17
</code></pre>
<p>You might wonder how the script knows which contract to call without specifying the contract address. Take a look at the <code>idlPath</code> variable‚Äîit points to the <code>target/idl/hello_sol.json</code> file, which contains compiled metadata about the contract, including its address. That‚Äôs right, the contract address is generated offline and doesn‚Äôt require uploading to the chain‚Äîit‚Äôs deterministically derived.</p>
<p>If everything runs smoothly, the script will output the transaction hash and a browser URL. For example:
<a href="https://explorer.solana.com/tx/2fnPgKkv3tGKKq72hhRxmW6WFSXuofMzXfY2UYoFZXTdJi37btdESy9NzS2gjpWzXX4CL5F7QfxugpctBVaMcBFY?cluster=devnet">https://explorer.solana.com/tx/2fnPgKkv3tGKKq72hhRxmW6WFSXuofMzXfY2UYoFZXTdJi37btdESy9NzS2gjpWzXX4CL5F7QfxugpctBVaMcBFY?cluster=devnet</a></p>
<p>At the bottom of this transaction page, you should see <code>Program logged: &quot;Hello, world!&quot;</code>‚Äîthis is the <code>msg!</code> line from your smart contract.</p>
<h3 id="10-Troubleshooting"><a href="#10-Troubleshooting" class="headerlink" title="10. Troubleshooting"></a>10. Troubleshooting</h3><p>If you run into issues during any of the above steps, version mismatches may be the cause. The blockchain space evolves quickly, so tools often break with updates. Here are the versions from my local environment:</p>
<pre><code class="text">rustup: rustup 1.28.2 (e4f3ad6f8 2025-04-28)
rustc: rustc 1.90.0-nightly (706f244db 2025-06-23)
solana: solana-cli 2.2.18 (src:8392f753; feat:3073396398, client:Agave)
anchor: anchor-cli 0.31.1
node: v24.2.0
@coral-xyz/anchor (nodejs): ^0.31.1
</code></pre>
</div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-2615E2THFJ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-2615E2THFJ');</script></html>